(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b12abf44"],{"0d41":function(t,e,s){"use strict";var a=s("65f3"),r=s.n(a);r.a},"65f3":function(t,e,s){},"836a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.order?s("div",{attrs:{id:"userOrderDetail"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns is-variable is-8 is-centered"},[s("div",{staticClass:"column is-8"},[s("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[s("ul",[s("li",[s("router-link",{attrs:{to:{name:"userOrders"}}},[s("span",{attrs:{translate:"yes"}},[t._v("Orders")])])],1),s("li",{staticClass:"is-active"},[s("a",{attrs:{"aria-current":"page"}},[s("span",{attrs:{translate:"yes"}},[t._v("Order")]),s("span",{staticClass:"order-title"},[t._v("#"),s("strong",[t._v(t._s(t.splitTitle(t.order._id)[0]))]),t._v(t._s(t.splitTitle(t.order._id)[1]))])])])])])])])]),s("h2",{staticClass:"title is-2"},[s("span",{attrs:{translate:"yes"}},[t._v("Order")]),s("span",{staticClass:"order-title"},[t._v("\n      #"),s("strong",[t._v(t._s(t.splitTitle(t.order._id)[0]))]),t._v(t._s(t.splitTitle(t.order._id)[1])+"\n    ")])]),s("div",{staticClass:"container"},[t.order.dates?s("div",{staticClass:"columns is-variable is-8 is-centered orderProgressVisual"},[s("div",{staticClass:"column is-8"},[s("div",{staticClass:"b-steps"},[s("nav",{staticClass:"steps"},[s("ul",{staticClass:"step-items"},[s("li",{class:t.order.dates.dateCreated?"step-item is-previous":"step-item"},[s("a",{staticClass:"step-link"},[s("div",{staticClass:"step-marker"}),s("div",{staticClass:"step-details"},[s("span",{staticClass:"step-title"},[s("span",{attrs:{translate:"yes"}},[t._v("Created")]),s("span",{staticClass:"step-date"},[t._v(t._s(t.order.dates.dateCreated))])])])])]),s("li",{class:t.order.dates.datePaid?"step-item is-previous":"step-item"},[s("a",{staticClass:"step-link"},[s("div",{staticClass:"step-marker"}),s("div",{staticClass:"step-details"},[s("span",{staticClass:"step-title"},[s("span",[t._v("Paid")]),s("span",{staticClass:"step-date"},[t._v(t._s(t.order.dates.datePaid))])])])])]),s("li",{class:t.order.dates.dateExpeded?"step-item is-previous":"step-item"},[s("a",{staticClass:"step-link"},[s("div",{staticClass:"step-marker"}),s("div",{staticClass:"step-details"},[s("span",{staticClass:"step-title"},[s("span",{attrs:{translate:"yes"}},[t._v("Expeded")]),s("span",{staticClass:"step-date"},[t._v(t._s(t.order.dates.dateExpeded))])])])])])])])])])]):t._e()]),s("div",{staticClass:"container order-detail-data"},[s("div",{staticClass:"columns is-variable is-8"},[s("div",{staticClass:"column is-12"},[s("span",[t._v("Your available actions:")]),"online_braintree"==this.order.data.paymentData.codename?s("div",[s("div",{attrs:{id:"payment-braintree-dropin-container"}}),s("button",{staticClass:"button is-primary",attrs:{id:"payment-braintree-payment-button",translate:"yes"}},[t._v("Pay The order")])]):"online_paypal_paypal"==this.order.data.paymentData.codename?s("div",[t.order.dates&&!t.order.dates.datePaid?s("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){return t.makePayment()}}},[s("span",[t._v("Pay order")])]):t._e()]):t._e()])])]),s("div",{staticClass:"container order-detail-data"},[s("div",{staticClass:"columns is-variable is-8"},[s("div",{staticClass:"column is-6"},[null!=t.order.items&&t.order.items&&t.order.items.length>0?s("div",[s("div",{staticClass:"columns is-variable is-8"},[s("div",{staticClass:"column is-12"},[s("div",{staticClass:"b-table"},[s("div",{staticClass:"table-wrapper"},[s("table",{staticClass:"table is-hoverable is-striped is-fullwidth"},[t._m(0),s("tbody",t._l(t.order.items,function(e,a){return s("tr",{key:a},[s("th",[t._v("\n                          "+t._s(e.name[t.$store.state.language.code])+"\n                        ")]),s("td",{staticClass:"cartItemAmount has-text-right"},[t._v("\n                          "+t._s(e.amount)+"\n                        ")]),s("td",{staticClass:"has-text-right"},[s("span",[t._v(t._s(t.$store.state.numeral(e.price).format("0.00")))]),s("span",[t._v(t._s(t.$store.state.currency.symbol))])])])}),0),s("tfoot",[t.order.prices&&t.order.prices.priceItems?s("tr",[s("td"),t._m(1),s("td",{staticClass:"has-text-right"},[t._v("\n                          "+t._s(t.$store.state.numeral(t.order.prices.priceItems).format("0.00"))+" \n                          "+t._s(t.$store.state.currency.symbol)+"\n                        ")])]):t._e(),t.order.prices&&t.order.prices.priceDelivery?s("tr",[s("td"),t._m(2),s("td",{staticClass:"has-text-right"},[t._v("\n                          "+t._s(t.$store.state.numeral(t.order.prices.priceDelivery).format("0.00"))+" \n                          "+t._s(t.$store.state.currency.symbol)+"\n                        ")])]):t._e(),t.order.prices&&t.order.prices.pricePayment?s("tr",[s("td"),t._m(3),s("td",{staticClass:"has-text-right"},[t._v("\n                          "+t._s(t.$store.state.numeral(t.order.prices.pricePayment).format("0.00"))+" \n                          "+t._s(t.$store.state.currency.symbol)+"\n                        ")])]):t._e(),t.order.prices&&t.order.prices.priceTotal?s("tr",[s("td"),t._m(4),s("td",{staticClass:"has-text-right"},[s("strong",[t._v(t._s(t.$store.state.numeral(t.order.prices.priceTotal).format("0.00")))]),t._v(" \n                          "+t._s(t.$store.state.currency.symbol)+"\n                        ")])]):t._e()])])])])])])]):s("div",[t._m(5)])]),s("div",{staticClass:"column is-6"},[s("div",{staticClass:"columns is-variable is-2"},[s("div",{staticClass:"column is-6"},[s("h3",{staticClass:"title is-5",attrs:{translate:"yes"}},[t._v("You are ordering to:")]),s("div",{staticClass:"summary-block with-pre-whitespace"},[t._v(t._s(t.invoiceAddress()))])]),t.checkDeliveryAddress()?s("div",{staticClass:"column is-6"},[s("h3",{staticClass:"title is-5",attrs:{translate:"yes"}},[t._v("With delivery to:")]),s("div",{staticClass:"summary-block with-pre-whitespace"},[t._v(t._s(t.deliveryAddress()))])]):s("div",{staticClass:"column is-6"},[s("h3",{staticClass:"title is-5",attrs:{translate:"yes"}},[t._v("With delivery to:")]),s("div",{staticClass:"summary-block",attrs:{translate:"yes"}},[t._v("same as invoice address")])])]),s("div",{staticClass:"columns is-variable is-2"},[s("div",{staticClass:"column is-6"},[s("h3",{staticClass:"title is-5",attrs:{translate:"yes"}},[t._v("Your Delivery settings:")]),t.checkDeliveryData()?s("div",{staticClass:"content summary-block"},t._l(t.deliveryData(),function(e,a){return s("div",{key:a},[s("p",[s("span",{staticClass:"capitalize"},[t._v(t._s(e.type))]),t._v(" - \n                  "),s("strong",[t._v(t._s(e.name))]),t._v(": "+t._s(t.$store.state.numeral(e.price).format("0.00"))+" "+t._s(t.$store.state.currency.symbol)+"\n                ")])])}),0):t._e()]),t.checkPaymentData()?s("div",{staticClass:"column is-6"},[s("div",[s("h3",{staticClass:"title is-5"},[t._v("Your Payment settings:")]),t.paymentData()?s("div",{staticClass:"content summary-block"},[s("p",[s("strong",[t._v(t._s(t.paymentData().name))]),t._v(": "+t._s(t.$store.state.numeral(t.paymentData().price).format("0.00"))+" "+t._s(t.$store.state.currency.symbol))])]):t._e()])]):t._e()])])])])]):t._e()},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{},[s("div",{staticClass:"th-wrap",attrs:{translate:"yes"}},[t._v("Name")])]),s("th",{},[s("div",{staticClass:"th-wrap is-pulled-right",attrs:{translate:"yes"}},[t._v("Qty")])]),s("th",{},[s("div",{staticClass:"th-wrap is-pulled-right",attrs:{translate:"yes"}},[t._v("Price")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"has-text-right"},[s("strong",{attrs:{translate:"yes"}},[t._v("Products Total")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"has-text-right"},[s("span",{attrs:{translate:"yes"}},[t._v("Price delivery")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"has-text-right"},[s("span",{attrs:{translate:"yes"}},[t._v("Price payment")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{staticClass:"has-text-right"},[s("strong",{attrs:{translate:"yes"}},[t._v("Total price")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",{staticClass:"title is-3"},[s("span",{attrs:{translate:"yes"}},[t._v("No items in this order")])])}],i=(s("7f7f"),s("ac6a"),s("456d"),{name:"userOrderDetail",data:function(){return{order:null}},created:function(){this.getOrder(this.$route.params.id)},methods:{getOrder:function(t){var e=this,s={timeout:3e3,needsAuth:!0},a={query:{_id:t},limit:1};this.$httpc.post("order/list",a,s).then(function(t){t&&t.data&&1==t.data.length&&(e.order=t.data[0])}).catch(function(t){console.log(t)}).then(function(){})},splitTitle:function(t){return[t.slice(0,7),t.slice(7)]},checkDeliveryAddress:function(){return!!(this.order&&this.order.addresses&&this.order.addresses.deliveryAddress&&Object.keys(this.order.addresses.deliveryAddress).length>0)},invoiceAddress:function(){if(this.$store.state.coredata)return this.$helpers.addressToString(this.order.addresses.invoiceAddress,this.$store.state.coredata.countries,["type"])},deliveryAddress:function(){return this.order.addresses.deliveryAddress?this.$helpers.addressToString(this.order.addresses.deliveryAddress,this.$store.state.coredata.countries,["type"]):null},checkDeliveryData:function(){return!!(this.order&&this.order.data.deliveryData&&this.order.data.deliveryData.codename)},deliveryData:function(){var t=this,e=[];if(this.order&&this.order.data.deliveryData&&this.order.data.deliveryData.codename){var s=this.order.data.deliveryData.codename;if(console.log("deliveryCodenames: ",s,this.order),this.order.settings&&this.order.settings.deliveryMethods){var a=this.order.settings.deliveryMethods;Object.keys(s).forEach(function(r){if(s&&a&&s[r]&&null!=s[r]){var i=s[r];i["type"]=r,i["name"]=i.value,a[r]&&a[r].forEach(function(e){e.type&&e.codename&&e.type==r&&e.codename==i["value"]&&(i["name"]=e.name[t.$store.getters.getLanguage])}),e.push(i)}})}return e}},checkPaymentData:function(){return!(!this.order||!this.order.data.paymentData)},paymentData:function(){var t=this,e=null;if(this.order&&this.order.data.paymentData){var s="undefined"!==typeof this.order.data.paymentData.name[t.$store.getters.getLanguage]?this.order.data.paymentData.name[t.$store.getters.getLanguage]:this.order.data.paymentData.codename;e={name:s,price:this.order.data.paymentData.price}}return e},makePayment:function(){if(console.log("this.order.data.paymentData.codename",this.order.data.paymentData.codename),"online_braintree"==this.order.data.paymentData.codename){var t=document.createElement("script"),e=this;t.onload=function(){e.paymentBraintreeLoaded()},t.setAttribute("src","https://js.braintreegateway.com/web/dropin/1.16.0/js/dropin.min.js"),t.async=!0,document.head.appendChild(t)}else this.order.data.paymentData.codename.indexOf("online_paypal")>-1&&this.paymentPayPalCall()},paymentBraintreeLoaded:function(){var t=this.$el.querySelector("#payment-braintree-payment-button"),e=this;this.$httpc.get("/users/btut",{timeout:5e3}).then(function(s){s.data&&s.data.result&&"success"===s.data.result&&s.data.token&&braintree.dropin.create({authorization:s.data.token,container:"#payment-braintree-dropin-container",paypal:{flow:"checkout"}},function(s,a){console.log(s,a),t.addEventListener("click",function(){a.requestPaymentMethod(function(t,s){console.log("----- braintree payload -----"),console.log(s),e.$httpc.post("/order/btcheckout",{orderId:e.order._id,checkoutData:s},{timeout:5e3}).then(function(t){console.log("---- braintree transaction response ----"),console.log(s)})})})})}).catch(function(t){return console.log(t),null}).then(function(){return null})},paymentPayPalCall:function(){var t=this;t.$httpc.post("/order/paypalcheckout",{orderId:t.order._id,checkoutData:null},{timeout:5e3}).then(function(t){t&&t.data&&t.data.url&&""!=t.data.url.trim()&&(window.location.href=t.data.url)})}}}),n=i,d=(s("0d41"),s("2877")),o=Object(d["a"])(n,a,r,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-b12abf44.0ccb81f9.js.map